<!DOCTYPE html>
<html lang="cs">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Nemovitosti ‚Äì Spr√°va nemovitost√≠</title>
<link rel="stylesheet" href="css/style.css">
</head>
<body>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     LOGIN SCREEN
     ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div id="login-screen">
  <div class="login-box">
    <div class="login-logo">
      <h1>Nemovitosti</h1>
      <p>Spr√°va nemovitost√≠ &amp; platebn√≠ mor√°lka</p>
    </div>
    <div class="fg">
      <label>E-mail</label>
      <input type="email" id="login-email" placeholder="admin@example.com" autocomplete="email">
    </div>
    <div class="fg">
      <label>Heslo</label>
      <input type="password" id="login-pass" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" autocomplete="current-password">
    </div>
    <div id="login-error"></div>
    <button class="btn-login" id="btn-login">P≈ôihl√°sit se</button>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     APP SHELL ‚Äì Sidebar + Main
     ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div id="app">
  <button class="hamburger" id="btn-hamburger" type="button" aria-label="Menu">‚ò∞</button>

  <div class="app-layout">
    <!-- SIDEBAR -->
    <aside class="sidebar" id="sidebar">
      <div class="sidebar-header">
        <span class="sidebar-brand">Nemovitosti</span>
        <button class="sidebar-close" id="btn-sidebar-close" type="button" aria-label="Zav≈ô√≠t">√ó</button>
      </div>
      <nav class="sidebar-nav">
        <button class="nav-link active" data-view="dashboard"><span class="icon">üìä</span> P≈ôehled</button>
        <button class="nav-link" data-view="properties"><span class="icon">üè†</span> Nemovitosti</button>
        <button class="nav-link" data-view="tenants"><span class="icon">üë§</span> N√°jemn√≠ci</button>
        <button class="nav-link" data-view="contracts"><span class="icon">üìÑ</span> Smlouvy</button>
        <button class="nav-link" data-view="payments"><span class="icon">üí∞</span> Platby</button>
        <button class="nav-link" data-view="users" id="nav-users" style="display:none"><span class="icon">‚öô</span> U≈æivatel√©</button>
      </nav>
      <div class="sidebar-footer">
        <div class="sidebar-user" id="nav-username"></div>
        <button class="btn-logout" id="btn-logout">Odhl√°sit se</button>
      </div>
    </aside>

    <!-- MAIN -->
    <div class="main-wrap">
  <main class="main">
    <div class="container">

      <!-- ‚ïê‚ïê‚ïê DASHBOARD ‚ïê‚ïê‚ïê -->
      <div class="view active" id="view-dashboard">
        <div class="page-title">P≈ôehled platebn√≠ mor√°lky</div>
        <div class="stats" id="dash-stats"></div>
        <div class="heatmap-section card">
          <div class="heatmap-header">
            <h3>Platebn√≠ kalend√°≈ô</h3>
            <select id="dash-year" class="heatmap-year-select"></select>
          </div>
          <div class="heatmap-wrap" id="dash-heatmap"></div>
        </div>
        <div id="dash-table"></div>
      </div>

      <!-- ‚ïê‚ïê‚ïê PROPERTIES ‚ïê‚ïê‚ïê -->
      <div class="view" id="view-properties">
        <div class="page-title">Nemovitosti</div>
        <div class="card">
          <div class="card-title" id="prop-form-title">P≈ôidat nemovitost</div>
          <div class="alert" id="prop-alert"></div>
          <input type="hidden" id="prop-edit-id">
          <div class="form-row">
            <div class="fg"><label>N√°zev *</label><input type="text" id="prop-name"></div>
            <div class="fg">
              <label>Typ</label>
              <select id="prop-type">
                <option value="apartment">Byt</option>
                <option value="house">D≈Øm</option>
                <option value="garage">Gar√°≈æ</option>
                <option value="commercial">Komerƒçn√≠</option>
                <option value="land">Pozemek</option>
              </select>
            </div>
          </div>
          <div class="fg"><label>Adresa *</label><input type="text" id="prop-address" placeholder="Zaƒçnƒõte ps√°t ulici, PSƒå nebo mƒõsto..." autocomplete="off"></div>
          <div class="form-row">
            <div class="fg"><label>V√Ωmƒõra (m¬≤)</label><input type="number" id="prop-size-m2" step="0.01" min="0" placeholder="55"></div>
            <div class="fg"><label>Kupn√≠ cena (Kƒç)</label><input type="number" id="prop-purchase-price" step="0.01" min="0" placeholder="2500000"></div>
            <div class="fg"><label>Datum koupƒõ</label><input type="date" id="prop-purchase-date"></div>
          </div>
          <div class="fg"><label>Pozn√°mka</label><textarea id="prop-note" rows="2"></textarea></div>
          <div class="form-actions">
            <button class="btn btn-pri" id="btn-prop-save">P≈ôidat nemovitost</button>
            <button class="btn btn-ghost" id="btn-prop-cancel" style="display:none">Zru≈°it</button>
          </div>
        </div>
        <div id="prop-table"></div>
      </div>

      <!-- ‚ïê‚ïê‚ïê TENANTS ‚ïê‚ïê‚ïê -->
      <div class="view" id="view-tenants">
        <div class="page-title">N√°jemn√≠ci</div>
        <div class="card">
          <div class="card-title" id="ten-form-title">P≈ôidat n√°jemn√≠ka</div>
          <div class="alert" id="ten-alert"></div>
          <input type="hidden" id="ten-edit-id">
          <div class="form-row">
            <div class="fg">
              <label>Typ</label>
              <select id="ten-type">
                <option value="person">Fyzick√° osoba</option>
                <option value="company">Pr√°vnick√° osoba</option>
              </select>
            </div>
          </div>
          <div class="form-row">
            <div class="fg"><label>IƒåO</label><input type="text" id="ten-ic" placeholder="12345678"></div>
            <div class="fg"><label>DIƒå</label><input type="text" id="ten-dic" placeholder="CZ12345678"></div>
          </div>
          <div class="fg fg-ares-btn" id="ten-ares-wrap" style="display:none">
            <button type="button" class="btn btn-ares btn-sm" id="ten-ares-btn" title="Vypln√≠ n√°zev, adresu a DIƒå podle Iƒå">Naƒç√≠st z ARES</button>
          </div>
          <div class="fg"><label>Jm√©no / N√°zev *</label><input type="text" id="ten-name"></div>
          <div class="fg"><label>Adresa</label><input type="text" id="ten-address" placeholder="Zaƒçnƒõte ps√°t ulici, PSƒå nebo mƒõsto..." autocomplete="off"></div>
          <div class="form-row">
            <div class="fg"><label>E-mail</label><input type="email" id="ten-email"></div>
            <div class="fg"><label>Telefon</label><input type="tel" id="ten-phone"></div>
          </div>
          <div class="fg"><label>Pozn√°mka</label><textarea id="ten-note" rows="2"></textarea></div>
          <div class="form-actions">
            <button class="btn btn-pri" id="btn-ten-save">P≈ôidat n√°jemn√≠ka</button>
            <button class="btn btn-ghost" id="btn-ten-cancel" style="display:none">Zru≈°it</button>
          </div>
        </div>
        <div id="ten-table"></div>
      </div>

      <!-- ‚ïê‚ïê‚ïê CONTRACTS ‚ïê‚ïê‚ïê -->
      <div class="view" id="view-contracts">
        <div class="page-title">N√°jemn√≠ smlouvy</div>
        <div class="card">
          <div class="card-title" id="con-form-title">P≈ôidat smlouvu</div>
          <div class="alert" id="con-alert"></div>
          <input type="hidden" id="con-edit-id">
          <div class="form-row">
            <div class="fg"><label>Nemovitost *</label><select id="con-property"></select></div>
            <div class="fg fg-tenant-row">
              <label>N√°jemn√≠k *</label>
              <div class="select-with-btn">
                <select id="con-tenant"></select>
                <button type="button" class="btn btn-ghost btn-sm" id="btn-con-add-tenant" title="P≈ôidat nov√©ho n√°jemn√≠ka">+ N√°jemn√≠k</button>
              </div>
            </div>
          </div>
          <div class="form-row">
            <div class="fg"><label>Zaƒç√°tek smlouvy *</label><input type="date" id="con-start"></div>
            <div class="fg"><label>Konec smlouvy (pr√°zdn√© = neurƒçit√°)</label><input type="date" id="con-end"></div>
          </div>
          <div class="form-row">
            <div class="fg"><label>Mƒõs√≠ƒçn√≠ n√°jemn√© (Kƒç) *</label><input type="number" id="con-rent" step="0.01" min="0"></div>
          </div>
          <div class="fg"><label>Pozn√°mka</label><textarea id="con-note" rows="2"></textarea></div>
          <div class="form-actions">
            <button class="btn btn-pri" id="btn-con-save">P≈ôidat smlouvu</button>
            <button class="btn btn-ghost" id="btn-con-cancel" style="display:none">Zru≈°it</button>
          </div>
        </div>
        <div id="con-table"></div>
      </div>

      <!-- ‚ïê‚ïê‚ïê PAYMENTS ‚ïê‚ïê‚ïê -->
      <div class="view" id="view-payments">
        <div class="page-title">Platby</div>
        <div class="card">
          <div class="card-title" id="pay-form-title">Zaznamenat platbu</div>
          <div class="alert" id="pay-alert"></div>
          <input type="hidden" id="pay-edit-id">
          <div class="fg"><label>Smlouva *</label><select id="pay-contract"></select></div>
          <div class="form-row">
            <div class="fg">
              <label>Za mƒõs√≠c *</label>
              <select id="pay-month">
                <option value="1">Leden</option><option value="2">√önor</option>
                <option value="3">B≈ôezen</option><option value="4">Duben</option>
                <option value="5">Kvƒõten</option><option value="6">ƒåerven</option>
                <option value="7">ƒåervenec</option><option value="8">Srpen</option>
                <option value="9">Z√°≈ô√≠</option><option value="10">≈ò√≠jen</option>
                <option value="11">Listopad</option><option value="12">Prosinec</option>
              </select>
            </div>
            <div class="fg"><label>Za rok *</label><select id="pay-year"></select></div>
          </div>
          <div class="form-row">
            <div class="fg"><label>ƒå√°stka (Kƒç) *</label><input type="number" id="pay-amount" step="0.01" min="0"></div>
            <div class="fg"><label>Datum platby *</label><input type="date" id="pay-date"></div>
          </div>
          <div class="fg"><label>Pozn√°mka</label><textarea id="pay-note" rows="2"></textarea></div>
          <div class="form-actions">
            <button class="btn btn-pri" id="btn-pay-save">Zaznamenat platbu</button>
            <button class="btn btn-ghost" id="btn-pay-cancel" style="display:none">Zru≈°it</button>
          </div>
        </div>
        <div class="filter-bar">
          <label>Filtr:</label>
          <select id="pay-filter-contract"><option value="">‚Äî V≈°echny smlouvy ‚Äî</option></select>
        </div>
        <div id="pay-table"></div>
      </div>

      <!-- ‚ïê‚ïê‚ïê USERS ‚ïê‚ïê‚ïê -->
      <div class="view" id="view-users">
        <div class="page-title">Spr√°va u≈æivatel≈Ø</div>
        <div class="card">
          <div class="card-title">P≈ôidat u≈æivatele</div>
          <div class="alert" id="usr-alert"></div>
          <div class="form-row">
            <div class="fg"><label>Jm√©no *</label><input type="text" id="usr-name"></div>
            <div class="fg"><label>E-mail *</label><input type="email" id="usr-email"></div>
          </div>
          <div class="form-row">
            <div class="fg"><label>Heslo * (min 8 znak≈Ø)</label><input type="password" id="usr-pass"></div>
            <div class="fg">
              <label>Rolle</label>
              <select id="usr-role">
                <option value="user">U≈æivatel</option>
                <option value="admin">Admin</option>
              </select>
            </div>
          </div>
          <div class="form-actions">
            <button class="btn btn-pri" id="btn-usr-add">P≈ôidat u≈æivatele</button>
          </div>
        </div>
        <div id="usr-table"></div>
      </div>

    </div><!-- /container -->
  </main>

  <footer class="app-footer">
    <span class="footer-version">v0.14.10</span>
    ¬© 2025 Nemovitosti ‚Äì Spr√°va nemovitost√≠ &amp; platebn√≠ mor√°lka
    <span class="footer-credits">Navajbk√≥dov√°no by <a href="https://www.linkedin.com/in/jantobolik" target="_blank" rel="noopener">Honza Tobol√≠k</a> @ <a href="https://sensio.cz" target="_blank" rel="noopener">Sensio.cz</a></span>
  </footer>
  </div><!-- /main-wrap -->
  </div><!-- /app-layout -->
</div><!-- /app -->

<!-- ‚ïê‚ïê‚ïê MODAL: Platba (heatmap cell) ‚ïê‚ïê‚ïê -->
<div class="modal" id="modal-payment">
  <div class="modal-ov" onclick="UI.modalClose('modal-payment')"></div>
  <div class="modal-box">
    <div class="modal-header">
      <h3 class="modal-title">Platba</h3>
      <button type="button" class="modal-close" onclick="UI.modalClose('modal-payment')" aria-label="Zav≈ô√≠t">√ó</button>
    </div>
    <div class="modal-body">
      <div class="payment-info" id="pay-modal-info"></div>
      <div class="fg">
        <label>ƒå√°stka (Kƒç) *</label>
        <input type="number" id="pay-modal-amount" step="0.01" min="0">
      </div>
      <div class="fg payment-checkbox-wrap">
        <label class="payment-checkbox-label">
          <input type="checkbox" id="pay-modal-paid">
          <span>Zaplaceno</span>
        </label>
      </div>
      <div class="fg" id="pay-modal-date-wrap" style="display:none">
        <label>Datum √∫hrady *</label>
        <input type="date" id="pay-modal-date">
      </div>
    </div>
    <div class="form-actions">
      <button class="btn btn-success" id="btn-pay-modal-save">Ulo≈æit</button>
      <button class="btn btn-ghost" onclick="UI.modalClose('modal-payment')">Zru≈°it</button>
    </div>
    <input type="hidden" id="pay-modal-contract-id">
    <input type="hidden" id="pay-modal-month-key">
    <input type="hidden" id="pay-modal-property-name">
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê MODAL: Nov√Ω n√°jemn√≠k (ze smluv) ‚ïê‚ïê‚ïê -->
<div class="modal" id="modal-tenant">
  <div class="modal-ov" onclick="UI.modalClose('modal-tenant')"></div>
  <div class="modal-box">
    <div class="modal-header">
      <h3 class="modal-title">P≈ôidat n√°jemn√≠ka</h3>
      <button type="button" class="modal-close" onclick="UI.modalClose('modal-tenant')" aria-label="Zav≈ô√≠t">√ó</button>
    </div>
    <div class="modal-body">
      <div class="alert" id="modal-tenant-alert"></div>
      <div class="form-row">
        <div class="fg">
          <label>Typ</label>
          <select id="modal-tenant-type">
            <option value="person">Fyzick√° osoba</option>
            <option value="company">Pr√°vnick√° osoba</option>
          </select>
        </div>
      </div>
      <div class="form-row fg-ic-row">
        <div class="fg"><label>IƒåO</label><input type="text" id="modal-tenant-ic" placeholder="12345678"></div>
        <div class="fg"><label>DIƒå</label><input type="text" id="modal-tenant-dic" placeholder="CZ12345678"></div>
      </div>
      <div class="fg fg-ares-btn" id="modal-tenant-ares-wrap" style="display:none">
        <button type="button" class="btn btn-ares btn-sm" id="modal-tenant-ares-btn" title="Vypln√≠ n√°zev, adresu a DIƒå podle Iƒå">Naƒç√≠st z ARES</button>
      </div>
      <div class="fg"><label>Jm√©no / N√°zev *</label><input type="text" id="modal-tenant-name"></div>
      <div class="fg"><label>Adresa</label><input type="text" id="modal-tenant-address" placeholder="Zaƒçnƒõte ps√°t ulici..." autocomplete="off"></div>
      <div class="form-row">
        <div class="fg"><label>E-mail</label><input type="email" id="modal-tenant-email"></div>
        <div class="fg"><label>Telefon</label><input type="tel" id="modal-tenant-phone"></div>
      </div>
      <div class="fg"><label>Pozn√°mka</label><textarea id="modal-tenant-note" rows="2"></textarea></div>
    </div>
    <div class="form-actions">
      <button class="btn btn-pri" id="btn-modal-tenant-save">P≈ôidat a vybrat</button>
      <button class="btn btn-ghost" onclick="UI.modalClose('modal-tenant')">Zru≈°it</button>
    </div>
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê MODAL: Zmƒõna hesla ‚ïê‚ïê‚ïê -->
<div class="modal" id="modal-pass">
  <div class="modal-ov"></div>
  <div class="modal-box">
    <div class="modal-title">Zmƒõna hesla ‚Äì <span id="modal-pass-name"></span></div>
    <div class="alert" id="modal-pass-alert"></div>
    <div class="fg">
      <label>Nov√© heslo (min 8 znak≈Ø)</label>
      <input type="password" id="modal-pass-input">
    </div>
    <div class="form-actions">
      <button class="btn btn-pri" id="btn-modal-pass-save">Zmƒõnit heslo</button>
      <button class="btn btn-ghost" onclick="UI.modalClose('modal-pass')">Zru≈°it</button>
    </div>
    <input type="hidden" id="modal-pass-uid">
  </div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     SCRIPTS ‚Äì loaded in dependency order (no bundler needed)
     ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<script src="js/api.js"></script>       <!-- 1) API wrapper (no deps) -->
<script src="js/ui.js"></script>        <!-- 2) UI helpers (uses Api) -->
<script src="js/address-autocomplete.js"></script>
<script src="js/app.js"></script>       <!-- 3) Router + boot (uses Api, UI) -->
<script src="js/views/dashboard.js"></script>   <!-- 4) Views (use App, Api, UI) -->
<script src="js/views/properties.js"></script>
<script src="js/views/tenants.js"></script>
<script src="js/views/contracts.js"></script>
<script src="js/views/payments.js"></script>
<script src="js/views/users.js"></script>
</body>
</html>
